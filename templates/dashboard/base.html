{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<nav class="bg-white shadow-md px-6 py-3 flex justify-between items-center">
  <div class="text-xl font-semibold text-gray-800">
    Hospital Portal
  </div>

  <div class="flex items-center space-x-4">
    <!-- Profile dropdown -->
    <div class="relative" x-data="{ open: false }">
      <button
        @click="open = !open"
        class="flex items-center space-x-2 focus:outline-none"
      >
        <img
          src="{% if request.user.profile_pic %}{{ request.user.profile_pic.url }}{% else %}{% static 'images/default_profile.png' %}{% endif %}"
          alt="Profile"
          class="w-10 h-10 rounded-full border-2 border-gray-200"
        />
        <span class="text-gray-700 font-medium">{{ request.user.username }}</span>
      </button>

      <!-- Dropdown menu -->
      <div
        x-show="open"
        @click.away="open = false"
        class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-100 z-50"
      >
        <ul class="py-1 text-gray-700 text-sm">
          <li>
            <a href="{% url 'dashboard' %}" class="block px-4 py-2 hover:bg-gray-100">Home</a>
          </li>
          {% if request.user.user_type == 'doctor' %}
          <li>
            <a href="{% url 'my-posts' %}" class="block px-4 py-2 hover:bg-gray-100">My Posts</a>
          </li>
          <li>
            <a href="{% url 'post-create' %}" class="block px-4 py-2 hover:bg-gray-100">Create Post</a>
          </li>
          <li>
            <a href="{% url 'drafts' %}" class="block px-4 py-2 hover:bg-gray-100">Drafts</a>
          </li>
          {% endif %}
          <li>
            <a href="{% url 'logout' %}" class="block px-4 py-2 hover:bg-gray-100 text-red-600">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>



<!-- Alpine.js for dropdown -->
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
{% endblock %}
